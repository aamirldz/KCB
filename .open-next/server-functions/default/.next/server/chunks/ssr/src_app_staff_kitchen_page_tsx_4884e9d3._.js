module.exports=[30414,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(62036),f=a.i(50944),g=a.i(56747),h=a.i(68114);function i({order:a,onUpdateStatus:e}){let[f,g]=(0,c.useState)("0:00");(0,c.useEffect)(()=>{let b=()=>{let b=Math.floor((Date.now()-new Date(a.createdAt).getTime())/1e3),c=Math.floor(b/60);g(`${c}:${(b%60).toString().padStart(2,"0")}`)};b();let c=setInterval(b,1e3);return()=>clearInterval(c)},[a.createdAt]);let i="new"===a.status,j="preparing"===a.status,k="ready"===a.status,l=parseInt(f.split(":")[0]);return(0,b.jsxs)(d.motion.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`bg-charcoal/50 border-l-4 ${i?"border-l-blue-500":j?"border-l-gold":"border-l-green-500"}`,children:[(0,b.jsxs)("div",{className:"p-3 border-b border-dark-gray flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-white font-bold text-lg",children:["#",a.orderNumber]}),(0,b.jsx)("span",{className:`px-2 py-0.5 text-xs font-semibold ${i?"bg-blue-500/20 text-blue-400":j?"bg-gold/20 text-gold":"bg-green-500/20 text-green-400"}`,children:a.status.toUpperCase()})]}),(0,b.jsxs)("span",{className:`font-mono text-sm ${l>=15?"text-crimson":l>=10?"text-gold":"text-green-500"}`,children:["â± ",f]})]}),(0,b.jsxs)("div",{className:"px-3 py-2 border-b border-dark-gray text-xs text-gray flex items-center gap-3",children:[(0,b.jsx)("span",{children:"dine-in"===a.type?`ðŸ½ï¸ Table ${a.tableNumber}`:"ðŸ“¦ Takeaway"}),a.customerName&&(0,b.jsxs)("span",{children:["â€¢ ",a.customerName]}),(0,b.jsxs)("span",{children:["â€¢ ",(0,h.formatTime)(a.createdAt)]})]}),(0,b.jsx)("div",{className:"p-3 space-y-1.5",children:a.items.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsxs)("span",{className:"text-white font-bold",children:[a.quantity,"Ã—"]}),(0,b.jsx)("span",{className:"text-white flex-1",children:a.name}),(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${a.isVeg?"bg-green-500":"bg-crimson"}`})]},a.id))}),a.notes&&(0,b.jsx)("div",{className:"px-3 pb-3",children:(0,b.jsxs)("div",{className:"p-2 bg-crimson/10 border border-crimson/20 text-xs",children:[(0,b.jsx)("span",{className:"text-crimson font-semibold",children:"Note:"}),(0,b.jsx)("span",{className:"text-white ml-1",children:a.notes})]})}),(0,b.jsxs)("div",{className:"p-3 border-t border-dark-gray bg-black/30",children:[i&&(0,b.jsx)("button",{onClick:()=>e(a.id,"preparing"),className:"w-full py-2.5 bg-gold text-black text-sm font-bold hover:bg-gold-light transition-colors",children:"Start Preparing"}),j&&(0,b.jsx)("button",{onClick:()=>e(a.id,"ready"),className:"w-full py-2.5 bg-green-500 text-black text-sm font-bold hover:bg-green-400 transition-colors",children:"Mark Ready"}),k&&(0,b.jsx)("button",{onClick:()=>e(a.id,"completed"),className:"w-full py-2.5 bg-gray text-white text-sm font-bold hover:bg-light-gray hover:text-black transition-colors",children:"Complete"})]})]})}function j(){let a=(0,f.useRouter)(),{currentStaff:h,getKitchenOrders:j,getOrdersByStatus:k,updateOrderStatus:l,newOrderAlert:m,clearNewOrderAlert:n}=(0,g.useOrders)(),[o,p]=(0,c.useState)("active");(0,c.useEffect)(()=>{h||a.push("/staff")},[h,a]),(0,c.useEffect)(()=>{n()},[n]);let[,q]=(0,c.useState)(0);(0,c.useEffect)(()=>{let a=setInterval(()=>q(a=>a+1),5e3);return()=>clearInterval(a)},[]);let r=j(),s=k(["ready"]),t=r.filter(a=>"new"===a.status),u=r.filter(a=>"preparing"===a.status),v=k(["completed"]).filter(a=>a.completedAt&&new Date(a.completedAt).toDateString()===new Date().toDateString()).length;return h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"h-24"}),(0,b.jsxs)("div",{className:"min-h-[calc(100vh-5rem)] flex flex-col",children:[(0,b.jsxs)("div",{className:"p-3 bg-black/30 border-b border-dark-gray flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500 animate-pulse"}),(0,b.jsxs)("span",{className:"text-white text-sm",children:[(0,b.jsx)("span",{className:"font-bold",children:t.length})," New"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-gold"}),(0,b.jsxs)("span",{className:"text-white text-sm",children:[(0,b.jsx)("span",{className:"font-bold",children:u.length})," Preparing"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,b.jsxs)("span",{className:"text-white text-sm",children:[(0,b.jsx)("span",{className:"font-bold",children:s.length})," Ready"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"text-gray text-sm",children:["âœ“ ",v," done today"]}),(0,b.jsxs)("div",{className:"flex bg-charcoal",children:[(0,b.jsxs)("button",{onClick:()=>p("active"),className:`px-4 py-2 text-sm font-semibold transition-all ${"active"===o?"bg-crimson text-white":"text-gray"}`,children:["Active (",r.length,")"]}),(0,b.jsxs)("button",{onClick:()=>p("ready"),className:`px-4 py-2 text-sm font-semibold transition-all relative ${"ready"===o?"bg-green-500 text-white":"text-gray"}`,children:["Ready (",s.length,")"]})]})]})]}),(0,b.jsx)(e.AnimatePresence,{children:m&&(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mx-3 mt-3 p-3 bg-blue-500/20 border border-blue-500/30 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.motion.span,{animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0},children:"ðŸ””"}),(0,b.jsx)("span",{className:"text-blue-400 font-semibold text-sm",children:"New order received!"})]}),(0,b.jsx)("button",{onClick:n,className:"text-blue-400 text-xs hover:text-white",children:"Dismiss"})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:"active"===o?(0,b.jsx)(b.Fragment,{children:r.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:(0,b.jsx)(e.AnimatePresence,{children:r.map(a=>(0,b.jsx)(i,{order:a,onUpdateStatus:l},a.id))})}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,b.jsx)(d.motion.span,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0},className:"text-6xl mb-4",children:"ðŸ‘¨â€ðŸ³"}),(0,b.jsx)("h3",{className:"text-white text-xl font-semibold mb-1",children:"All caught up!"}),(0,b.jsx)("p",{className:"text-gray text-sm",children:"No orders in queue"})]})}):(0,b.jsx)(b.Fragment,{children:s.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:(0,b.jsx)(e.AnimatePresence,{children:s.map(a=>(0,b.jsx)(i,{order:a,onUpdateStatus:l},a.id))})}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,b.jsx)("span",{className:"text-6xl mb-4",children:"âœ¨"}),(0,b.jsx)("h3",{className:"text-white text-xl font-semibold mb-1",children:"No ready orders"}),(0,b.jsx)("p",{className:"text-gray text-sm",children:"Orders will appear once prepared"})]})})})]})]}):null}a.s(["default",()=>j])}];

//# sourceMappingURL=src_app_staff_kitchen_page_tsx_4884e9d3._.js.map