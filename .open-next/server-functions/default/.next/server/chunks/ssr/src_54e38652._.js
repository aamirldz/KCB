module.exports=[56747,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=(0,c.createContext)(void 0),f="kcb-staff-orders",g="kcb-current-staff",h="kcb-order-counter";function i({children:a}){let[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),s=(0,c.useRef)(0);(0,c.useEffect)(()=>{let a=localStorage.getItem(f),b=localStorage.getItem(g),c=localStorage.getItem(h);if(a){let b=JSON.parse(a).map(a=>({...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt),preparedAt:a.preparedAt?new Date(a.preparedAt):void 0,completedAt:a.completedAt?new Date(a.completedAt):void 0}));j(b),s.current=b.length}b&&l(JSON.parse(b)),c&&n(parseInt(c,10)),r(!0)},[]),(0,c.useEffect)(()=>{q&&localStorage.setItem(f,JSON.stringify(i))},[i,q]),(0,c.useEffect)(()=>{q&&k&&localStorage.setItem(g,JSON.stringify(k))},[k,q]),(0,c.useEffect)(()=>{q&&localStorage.setItem(h,m.toString())},[m,q]),(0,c.useEffect)(()=>{i.length>s.current&&p(!0),s.current=i.length},[i.length]);let t=(0,c.useCallback)(a=>{l(a)},[]),u=(0,c.useCallback)(()=>{l(null),localStorage.removeItem(g)},[]),v=(0,c.useCallback)((a,b,c,e,f)=>{let g=a.reduce((a,b)=>a+b.price*b.quantity,0),h=.05*g,i={id:(0,d.generateId)(),orderNumber:m,type:b,tableNumber:c,items:a,subtotal:g,tax:h,total:g+h,status:"new",customerName:e,notes:f,createdAt:new Date,updatedAt:new Date,createdBy:k?.name||"Unknown"};return j(a=>[i,...a]),n(a=>a+1),i},[m,k]),w=(0,c.useCallback)((a,b)=>{j(c=>c.map(c=>{if(c.id===a){let a={status:b,updatedAt:new Date};return"ready"===b&&(a.preparedAt=new Date),"completed"===b&&(a.completedAt=new Date),{...c,...a}}return c}))},[]),x=(0,c.useCallback)((a,b,c)=>{j(d=>d.map(d=>{if(d.id===a){let a=d.items.map(a=>a.id===b?{...a,status:c}:a),e=a.every(a=>"ready"===a.status),f=a.some(a=>"preparing"===a.status);return{...d,items:a,status:e?"ready":f?"preparing":d.status,updatedAt:new Date}}return d}))},[]),y=(0,c.useCallback)(a=>{w(a,"cancelled")},[w]),z=(0,c.useCallback)(a=>i.filter(b=>a.includes(b.status)),[i]),A=(0,c.useCallback)(()=>i.filter(a=>["new","preparing","ready"].includes(a.status)),[i]),B=(0,c.useCallback)(()=>i.filter(a=>["new","preparing"].includes(a.status)).sort((a,b)=>a.createdAt.getTime()-b.createdAt.getTime()),[i]),C=(0,c.useCallback)(()=>{p(!1)},[]);return(0,b.jsx)(e.Provider,{value:{orders:i,currentStaff:k,orderCounter:m,login:t,logout:u,createOrder:v,updateOrderStatus:w,updateItemStatus:x,cancelOrder:y,getOrdersByStatus:z,getActiveOrders:A,getKitchenOrders:B,newOrderAlert:o,clearNewOrderAlert:C},children:a})}function j(){let a=(0,c.useContext)(e);if(!a)throw Error("useOrders must be used within an OrderProvider");return a}a.s(["OrderProvider",()=>i,"useOrders",()=>j])},63073,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(46271),g=a.i(62036),h=a.i(56747);let i=[{href:"/staff/pos",label:"POS",icon:"ðŸ›’"},{href:"/staff/kitchen",label:"Kitchen",icon:"ðŸ‘¨â€ðŸ³"},{href:"/staff/orders",label:"Orders",icon:"ðŸ“‹"}];function j(){let a=(0,e.usePathname)(),g=(0,e.useRouter)(),{currentStaff:j,logout:k,getActiveOrders:l}=(0,h.useOrders)(),[m,n]=(0,c.useState)(new Date),o=l().length;return((0,c.useEffect)(()=>{let a=setInterval(()=>n(new Date),1e3);return()=>clearInterval(a)},[]),"/staff"===a)?null:(0,b.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-black via-charcoal to-black border-b border-crimson/20",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-14 px-4 lg:px-6",children:[(0,b.jsxs)(d.default,{href:"/staff",className:"flex items-center gap-3 group",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-crimson/20 to-gold/10 border border-crimson/30 flex items-center justify-center group-hover:border-crimson/50 transition-colors",children:(0,b.jsx)("span",{className:"text-xl",children:"ðŸœ"})}),(0,b.jsxs)("div",{className:"hidden sm:block",children:[(0,b.jsx)("span",{className:"text-white text-sm font-bold tracking-wide block",children:"KCB Staff"}),j&&(0,b.jsx)("span",{className:"text-gold text-xs",children:j.name})]})]}),(0,b.jsx)("nav",{className:"flex items-center gap-1 bg-black/40 border border-gray/10 p-1 rounded-sm",children:i.map(c=>(0,b.jsxs)(d.default,{href:c.href,className:`relative flex items-center gap-2 px-4 py-2 text-sm font-medium transition-all rounded-sm ${a===c.href?"bg-crimson text-white shadow-[0_0_15px_rgba(185,28,28,0.4)]":"text-gray hover:text-white hover:bg-white/5"}`,children:[(0,b.jsx)("span",{className:"text-base",children:c.icon}),(0,b.jsx)("span",{className:"hidden sm:inline",children:c.label}),"/staff/kitchen"===c.href&&o>0&&"/staff/kitchen"!==a&&(0,b.jsx)(f.motion.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-gold text-black text-xs font-bold rounded-full flex items-center justify-center shadow-[0_0_10px_rgba(217,119,6,0.5)]",children:o})]},c.href))}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"hidden md:block text-right",children:[(0,b.jsx)("span",{className:"text-gold font-mono text-sm block",children:m.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)("span",{className:"text-gray text-xs",children:m.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),(0,b.jsx)(d.default,{href:"/",className:"hidden lg:flex items-center gap-1 text-xs text-gray hover:text-gold transition-colors",children:"â† Main Site"}),j&&(0,b.jsx)("button",{onClick:()=>{k(),g.push("/staff")},className:"px-3 py-1.5 bg-crimson/10 border border-crimson/30 text-crimson text-xs font-semibold hover:bg-crimson hover:text-white hover:border-crimson transition-all",children:"Logout"})]})]})})}function k({children:a}){let c=(0,e.usePathname)(),d="/staff"===c;return(0,b.jsx)(h.OrderProvider,{children:(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-black via-charcoal to-black",children:[(0,b.jsx)(j,{}),(0,b.jsx)("main",{className:d?"":"pt-20",children:(0,b.jsx)(g.AnimatePresence,{mode:"wait",children:(0,b.jsx)(f.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:a},c)})})]})})}a.s(["default",()=>k])}];

//# sourceMappingURL=src_54e38652._.js.map