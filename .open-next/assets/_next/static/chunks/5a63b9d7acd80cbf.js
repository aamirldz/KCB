(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90419,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=(0,r.createContext)(void 0),n="kcb-staff-orders",l="kcb-current-staff",i="kcb-order-counter";function c({children:e}){let[c,o]=(0,r.useState)([]),[d,u]=(0,r.useState)(null),[m,f]=(0,r.useState)(1),[h,x]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),b=(0,r.useRef)(0);(0,r.useEffect)(()=>{let e=localStorage.getItem(n),t=localStorage.getItem(l),r=localStorage.getItem(i);if(e){let t=JSON.parse(e).map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),preparedAt:e.preparedAt?new Date(e.preparedAt):void 0,completedAt:e.completedAt?new Date(e.completedAt):void 0}));o(t),b.current=t.length}t&&u(JSON.parse(t)),r&&f(parseInt(r,10)),g(!0)},[]),(0,r.useEffect)(()=>{p&&localStorage.setItem(n,JSON.stringify(c))},[c,p]),(0,r.useEffect)(()=>{p&&d&&localStorage.setItem(l,JSON.stringify(d))},[d,p]),(0,r.useEffect)(()=>{p&&localStorage.setItem(i,m.toString())},[m,p]),(0,r.useEffect)(()=>{if(c.length>b.current){x(!0);try{let e=new Audio("/notification.mp3");e.volume=.5,e.play().catch(()=>{})}catch{}}b.current=c.length},[c.length]);let v=(0,r.useCallback)(e=>{u(e)},[]),w=(0,r.useCallback)(()=>{u(null),localStorage.removeItem(l)},[]),j=(0,r.useCallback)((e,t,r,s,n)=>{let l=e.reduce((e,t)=>e+t.price*t.quantity,0),i=.05*l,c={id:(0,a.generateId)(),orderNumber:m,type:t,tableNumber:r,items:e,subtotal:l,tax:i,total:l+i,status:"new",customerName:s,notes:n,createdAt:new Date,updatedAt:new Date,createdBy:d?.name||"Unknown"};return o(e=>[c,...e]),f(e=>e+1),c},[m,d]),k=(0,r.useCallback)((e,t)=>{o(r=>r.map(r=>{if(r.id===e){let e={status:t,updatedAt:new Date};return"ready"===t&&(e.preparedAt=new Date),"completed"===t&&(e.completedAt=new Date),{...r,...e}}return r}))},[]),y=(0,r.useCallback)((e,t,r)=>{o(a=>a.map(a=>{if(a.id===e){let e=a.items.map(e=>e.id===t?{...e,status:r}:e),s=e.every(e=>"ready"===e.status),n=e.some(e=>"preparing"===e.status);return{...a,items:e,status:s?"ready":n?"preparing":a.status,updatedAt:new Date}}return a}))},[]),N=(0,r.useCallback)(e=>{k(e,"cancelled")},[k]),S=(0,r.useCallback)(e=>c.filter(t=>e.includes(t.status)),[c]),A=(0,r.useCallback)(()=>c.filter(e=>["new","preparing","ready"].includes(e.status)),[c]),C=(0,r.useCallback)(()=>c.filter(e=>["new","preparing"].includes(e.status)).sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime()),[c]),O=(0,r.useCallback)(()=>{x(!1)},[]);return(0,t.jsx)(s.Provider,{value:{orders:c,currentStaff:d,orderCounter:m,login:v,logout:w,createOrder:j,updateOrderStatus:k,updateItemStatus:y,cancelOrder:N,getOrdersByStatus:S,getActiveOrders:A,getKitchenOrders:C,newOrderAlert:h,clearNewOrderAlert:O},children:e})}function o(){let e=(0,r.useContext)(s);if(!e)throw Error("useOrders must be used within an OrderProvider");return e}e.s(["OrderProvider",()=>c,"useOrders",()=>o])},73888,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016),s=e.i(18566),n=e.i(46932),l=e.i(88653),i=e.i(90419);let c=[{href:"/staff/pos",label:"POS",icon:"ðŸ›’"},{href:"/staff/kitchen",label:"Kitchen",icon:"ðŸ‘¨â€ðŸ³"},{href:"/staff/orders",label:"Orders",icon:"ðŸ“‹"}];function o(){let e=(0,s.usePathname)(),l=(0,s.useRouter)(),{currentStaff:o,logout:d,getActiveOrders:u}=(0,i.useOrders)(),[m,f]=(0,r.useState)(new Date),h=u().length;return((0,r.useEffect)(()=>{let e=setInterval(()=>f(new Date),1e3);return()=>clearInterval(e)},[]),"/staff"===e)?null:(0,t.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-black via-charcoal to-black border-b border-crimson/20",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-14 px-4 lg:px-6",children:[(0,t.jsxs)(a.default,{href:"/staff",className:"flex items-center gap-3 group",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-crimson/20 to-gold/10 border border-crimson/30 flex items-center justify-center group-hover:border-crimson/50 transition-colors",children:(0,t.jsx)("span",{className:"text-xl",children:"ðŸœ"})}),(0,t.jsxs)("div",{className:"hidden sm:block",children:[(0,t.jsx)("span",{className:"text-white text-sm font-bold tracking-wide block",children:"KCB Staff"}),o&&(0,t.jsx)("span",{className:"text-gold text-xs",children:o.name})]})]}),(0,t.jsx)("nav",{className:"flex items-center gap-1 bg-black/40 border border-gray/10 p-1 rounded-sm",children:c.map(r=>(0,t.jsxs)(a.default,{href:r.href,className:`relative flex items-center gap-2 px-4 py-2 text-sm font-medium transition-all rounded-sm ${e===r.href?"bg-crimson text-white shadow-[0_0_15px_rgba(185,28,28,0.4)]":"text-gray hover:text-white hover:bg-white/5"}`,children:[(0,t.jsx)("span",{className:"text-base",children:r.icon}),(0,t.jsx)("span",{className:"hidden sm:inline",children:r.label}),"/staff/kitchen"===r.href&&h>0&&"/staff/kitchen"!==e&&(0,t.jsx)(n.motion.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-gold text-black text-xs font-bold rounded-full flex items-center justify-center shadow-[0_0_10px_rgba(217,119,6,0.5)]",children:h})]},r.href))}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"hidden md:block text-right",children:[(0,t.jsx)("span",{className:"text-gold font-mono text-sm block",children:m.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("span",{className:"text-gray text-xs",children:m.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),(0,t.jsx)(a.default,{href:"/",className:"hidden lg:flex items-center gap-1 text-xs text-gray hover:text-gold transition-colors",children:"â† Main Site"}),o&&(0,t.jsx)("button",{onClick:()=>{d(),l.push("/staff")},className:"px-3 py-1.5 bg-crimson/10 border border-crimson/30 text-crimson text-xs font-semibold hover:bg-crimson hover:text-white hover:border-crimson transition-all",children:"Logout"})]})]})})}function d({children:e}){let r=(0,s.usePathname)(),a="/staff"===r;return(0,t.jsx)(i.OrderProvider,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-black via-charcoal to-black",children:[(0,t.jsx)(o,{}),(0,t.jsx)("main",{className:a?"":"pt-20",children:(0,t.jsx)(l.AnimatePresence,{mode:"wait",children:(0,t.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:e},r)})})]})})}e.s(["default",()=>d])}]);