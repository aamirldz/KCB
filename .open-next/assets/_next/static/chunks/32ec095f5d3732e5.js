(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23412,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(46932),l=e.i(88653),r=e.i(18566),i=e.i(90419),n=e.i(75157);function c({order:e,onUpdateStatus:l}){let[r,i]=(0,s.useState)("0:00");(0,s.useEffect)(()=>{let t=()=>{let t=Math.floor((Date.now()-new Date(e.createdAt).getTime())/1e3),s=Math.floor(t/60);i(`${s}:${(t%60).toString().padStart(2,"0")}`)};t();let s=setInterval(t,1e3);return()=>clearInterval(s)},[e.createdAt]);let c="new"===e.status,d="preparing"===e.status,o="ready"===e.status,x=parseInt(r.split(":")[0]);return(0,t.jsxs)(a.motion.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`bg-charcoal/50 border-l-4 ${c?"border-l-blue-500":d?"border-l-gold":"border-l-green-500"}`,children:[(0,t.jsxs)("div",{className:"p-3 border-b border-dark-gray flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"text-white font-bold text-lg",children:["#",e.orderNumber]}),(0,t.jsx)("span",{className:`px-2 py-0.5 text-xs font-semibold ${c?"bg-blue-500/20 text-blue-400":d?"bg-gold/20 text-gold":"bg-green-500/20 text-green-400"}`,children:e.status.toUpperCase()})]}),(0,t.jsxs)("span",{className:`font-mono text-sm ${x>=15?"text-crimson":x>=10?"text-gold":"text-green-500"}`,children:["â± ",r]})]}),(0,t.jsxs)("div",{className:"px-3 py-2 border-b border-dark-gray text-xs text-gray flex items-center gap-3",children:[(0,t.jsx)("span",{children:"dine-in"===e.type?`ðŸ½ï¸ Table ${e.tableNumber}`:"ðŸ“¦ Takeaway"}),e.customerName&&(0,t.jsxs)("span",{children:["â€¢ ",e.customerName]}),(0,t.jsxs)("span",{children:["â€¢ ",(0,n.formatTime)(e.createdAt)]})]}),(0,t.jsx)("div",{className:"p-3 space-y-1.5",children:e.items.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsxs)("span",{className:"text-white font-bold",children:[e.quantity,"Ã—"]}),(0,t.jsx)("span",{className:"text-white flex-1",children:e.name}),(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${e.isVeg?"bg-green-500":"bg-crimson"}`})]},e.id))}),e.notes&&(0,t.jsx)("div",{className:"px-3 pb-3",children:(0,t.jsxs)("div",{className:"p-2 bg-crimson/10 border border-crimson/20 text-xs",children:[(0,t.jsx)("span",{className:"text-crimson font-semibold",children:"Note:"}),(0,t.jsx)("span",{className:"text-white ml-1",children:e.notes})]})}),(0,t.jsxs)("div",{className:"p-3 border-t border-dark-gray bg-black/30",children:[c&&(0,t.jsx)("button",{onClick:()=>l(e.id,"preparing"),className:"w-full py-2.5 bg-gold text-black text-sm font-bold hover:bg-gold-light transition-colors",children:"Start Preparing"}),d&&(0,t.jsx)("button",{onClick:()=>l(e.id,"ready"),className:"w-full py-2.5 bg-green-500 text-black text-sm font-bold hover:bg-green-400 transition-colors",children:"Mark Ready"}),o&&(0,t.jsx)("button",{onClick:()=>l(e.id,"completed"),className:"w-full py-2.5 bg-gray text-white text-sm font-bold hover:bg-light-gray hover:text-black transition-colors",children:"Complete"})]})]})}function d(){let e=(0,r.useRouter)(),{currentStaff:n,getKitchenOrders:d,getOrdersByStatus:o,updateOrderStatus:x,newOrderAlert:m,clearNewOrderAlert:h}=(0,i.useOrders)(),[g,p]=(0,s.useState)("active");(0,s.useEffect)(()=>{n||e.push("/staff")},[n,e]),(0,s.useEffect)(()=>{h()},[h]);let[,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=setInterval(()=>b(e=>e+1),5e3);return()=>clearInterval(e)},[]);let u=d(),j=o(["ready"]),f=u.filter(e=>"new"===e.status),N=u.filter(e=>"preparing"===e.status),y=o(["completed"]).filter(e=>e.completedAt&&new Date(e.completedAt).toDateString()===new Date().toDateString()).length;return n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-16"}),(0,t.jsxs)("div",{className:"min-h-[calc(100vh-5rem)] flex flex-col",children:[(0,t.jsxs)("div",{className:"p-3 bg-black/30 border-b border-dark-gray flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500 animate-pulse"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[(0,t.jsx)("span",{className:"font-bold",children:f.length})," New"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-gold"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[(0,t.jsx)("span",{className:"font-bold",children:N.length})," Preparing"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,t.jsxs)("span",{className:"text-white text-sm",children:[(0,t.jsx)("span",{className:"font-bold",children:j.length})," Ready"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-gray text-sm",children:["âœ“ ",y," done today"]}),(0,t.jsxs)("div",{className:"flex bg-charcoal",children:[(0,t.jsxs)("button",{onClick:()=>p("active"),className:`px-4 py-2 text-sm font-semibold transition-all ${"active"===g?"bg-crimson text-white":"text-gray"}`,children:["Active (",u.length,")"]}),(0,t.jsxs)("button",{onClick:()=>p("ready"),className:`px-4 py-2 text-sm font-semibold transition-all relative ${"ready"===g?"bg-green-500 text-white":"text-gray"}`,children:["Ready (",j.length,")"]})]})]})]}),(0,t.jsx)(l.AnimatePresence,{children:m&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mx-3 mt-3 p-3 bg-blue-500/20 border border-blue-500/30 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.motion.span,{animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0},children:"ðŸ””"}),(0,t.jsx)("span",{className:"text-blue-400 font-semibold text-sm",children:"New order received!"})]}),(0,t.jsx)("button",{onClick:h,className:"text-blue-400 text-xs hover:text-white",children:"Dismiss"})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:"active"===g?(0,t.jsx)(t.Fragment,{children:u.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:(0,t.jsx)(l.AnimatePresence,{children:u.map(e=>(0,t.jsx)(c,{order:e,onUpdateStatus:x},e.id))})}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,t.jsx)(a.motion.span,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0},className:"text-6xl mb-4",children:"ðŸ‘¨â€ðŸ³"}),(0,t.jsx)("h3",{className:"text-white text-xl font-semibold mb-1",children:"All caught up!"}),(0,t.jsx)("p",{className:"text-gray text-sm",children:"No orders in queue"})]})}):(0,t.jsx)(t.Fragment,{children:j.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:(0,t.jsx)(l.AnimatePresence,{children:j.map(e=>(0,t.jsx)(c,{order:e,onUpdateStatus:x},e.id))})}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,t.jsx)("span",{className:"text-6xl mb-4",children:"âœ¨"}),(0,t.jsx)("h3",{className:"text-white text-xl font-semibold mb-1",children:"No ready orders"}),(0,t.jsx)("p",{className:"text-gray text-sm",children:"Orders will appear once prepared"})]})})})]})]}):null}e.s(["default",()=>d])}]);